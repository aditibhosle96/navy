<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Anchors Away</title>
<style>
body {
font-family: 'Arial', sans-serif;
margin: 0;
padding: 0;
background-color: #0a192f;
color: #fff;
overflow-x: hidden;
}    
 
    .container {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
    }

    h1, h2, h3 {
        color: #ffd700;
        text-align: center;
    }

    .game-section {
        display: none;
        margin-top: 20px;
        background-color: #0e2a47;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
    }

    #welcome-screen {
        display: block;
        text-align: center;
    }

    .btn {
        background-color: #1e88e5;
        color: white;
        border: none;
        padding: 10px 20px;
        margin: 10px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        transition: background-color 0.3s;
    }

    .btn:hover {
        background-color: #0d47a1;
    }

    .quiz-question {
        margin-bottom: 20px;
    }

    .quiz-options {
        display: grid;
        grid-template-columns: 1fr;
        gap: 10px;
    }

    .option-btn {
        background-color: #2e5c8a;
        color: white;
        border: none;
        padding: 15px;
        border-radius: 5px;
        cursor: pointer;
        text-align: left;
        transition: background-color 0.3s;
    }

    .option-btn:hover {
        background-color: #3d7ab6;
    }

    .character-selection {
        display: flex;
        justify-content: space-around;
        margin: 30px 0;
    }

    .character-card {
        background-color: #193a61;
        padding: 15px;
        border-radius: 10px;
        cursor: pointer;
        text-align: center;
        width: 45%;
        transition: transform 0.3s;
    }

    .character-card:hover {
        transform: scale(1.05);
    }

    .character-img {
        width: 150px;
        height: 200px;
        background-color: #0a192f;
        margin: 0 auto;
        border-radius: 5px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .character-placeholder {
        font-size: 50px;
        color: #1e88e5;
    }

    .dialogue-container {
        background-color: #193a61;
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 20px;
    }

    .officer-img {
        width: 100px;
        height: 100px;
        background-color: #0a192f;
        border-radius: 50%;
        margin: 0 auto 15px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .dialogue-text {
        margin-bottom: 15px;
        line-height: 1.6;
    }

    .dialogue-options {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    #game-canvas {
        background-color: #071426;
        display: block;
        margin: 0 auto;
        border-radius: 5px;
        cursor: crosshair;
    }

    .game-controls {
        text-align: center;
        margin-top: 15px;
    }

    .control-btn {
        background-color: #1e88e5;
        color: white;
        border: none;
        padding: 15px 25px;
        margin: 0 5px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
    }

    .results-container {
        text-align: center;
    }

    .result-card {
        background-color: #193a61;
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 20px;
    }

    .emoji {
        font-size: 40px;
        margin-bottom: 10px;
    }

    #game-message {
        text-align: center;
        font-size: 24px;
        color: #ffd700;
        margin: 15px 0;
        min-height: 36px;
    }

    .game-stats {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
    }

    .stat {
        background-color: #193a61;
        padding: 10px;
        border-radius: 5px;
        width: 45%;
        text-align: center;
    }
</style>
</head>
<body>
<div class="container">
<div id="welcome-screen" class="game-section">
<h1>Anchors Away</h1>
<p>Discover your path in the Navy and experience the life of a Naval Officer!</p>
<button id="start-btn" class="btn">Begin Your Journey</button>
</div>    
    <div id="quiz-section" class="game-section">
        <h2>Navy Career Quiz</h2>
        <p>Answer these questions to find your ideal Naval career path:</p>

        <div class="quiz-question">
            <h3>1. What excites you the most about a career in the Navy?</h3>
            <div class="quiz-options">
                <button class="option-btn" data-value="1">1Ô∏è‚É£ Pushing my physical and mental limits in extreme training</button>
                <button class="option-btn" data-value="2">2Ô∏è‚É£ Working with high-tech naval systems and advanced weaponry</button>
                <button class="option-btn" data-value="3">3Ô∏è‚É£ Leading teams and making critical strategic decisions</button>
                <button class="option-btn" data-value="4">4Ô∏è‚É£ Designing, maintaining, and improving military technology</button>
            </div>
        </div>

        <div class="quiz-question" style="display: none;">
            <h3>2. How do you perform best under pressure?</h3>
            <div class="quiz-options">
                <button class="option-btn" data-value="1">1Ô∏è‚É£ By staying physically strong and handling high-adrenaline situations</button>
                <button class="option-btn" data-value="2">2Ô∏è‚É£ By analyzing data and deploying technical solutions</button>
                <button class="option-btn" data-value="3">3Ô∏è‚É£ By making quick but well-thought-out leadership decisions</button>
                <button class="option-btn" data-value="4">4Ô∏è‚É£ By diagnosing and fixing mechanical or structural issues</button>
            </div>
        </div>

        <div class="quiz-question" style="display: none;">
            <h3>3. What type of mission would you enjoy most?</h3>
            <div class="quiz-options">
                <button class="option-btn" data-value="1">1Ô∏è‚É£ Conducting underwater demolition or special forces operations</button>
                <button class="option-btn" data-value="2">2Ô∏è‚É£ Managing and operating sonar, radar, or weapons systems</button>
                <button class="option-btn" data-value="3">3Ô∏è‚É£ Leading a naval fleet or negotiating international missions</button>
                <button class="option-btn" data-value="4">4Ô∏è‚É£ Engineering and maintaining ships, submarines, and naval equipment</button>
            </div>
        </div>

        <div class="quiz-question" style="display: none;">
            <h3>4. What kind of training excites you the most?</h3>
            <div class="quiz-options">
                <button class="option-btn" data-value="1">1Ô∏è‚É£ Combat diving, parachuting, and endurance challenges</button>
                <button class="option-btn" data-value="2">2Ô∏è‚É£ Mastering radar, sonar, and missile defense systems</button>
                <button class="option-btn" data-value="3">3Ô∏è‚É£ Leadership, naval strategy, and fleet management</button>
                <button class="option-btn" data-value="4">4Ô∏è‚É£ Engineering, robotics, and ship maintenance</button>
            </div>
        </div>

        <div class="quiz-question" style="display: none;">
            <h3>5. What motivates you the most?</h3>
            <div class="quiz-options">
                <button class="option-btn" data-value="1">1Ô∏è‚É£ Being part of an elite, high-intensity force that never backs down</button>
                <button class="option-btn" data-value="2">2Ô∏è‚É£ Ensuring every system is mission-ready and functioning perfectly</button>
                <button class="option-btn" data-value="3">3Ô∏è‚É£ Commanding and inspiring people in high-pressure situations</button>
                <button class="option-btn" data-value="4">4Ô∏è‚É£ Solving technical challenges that keep the Navy running</button>
            </div>
        </div>
    </div>

    <div id="quiz-results" class="game-section">
        <h2>Your Naval Career Results</h2>
        <div class="results-container">
            <div id="result-display" class="result-card">
                <!-- Results will be inserted here -->
            </div>
            <button id="continue-to-character" class="btn">Continue Your Journey</button>
        </div>
    </div>

    <div id="character-selection" class="game-section">
        <h2>Choose Your Character</h2>
        <div class="character-selection">
            <div class="character-card" id="male-officer">
                <div class="character-img">
                    <div class="character-placeholder">‚ôÇÔ∏è</div>
                </div>
                <h3>Lieutenant Lim Wei Ming</h3>
                <p>Naval Officer</p>
            </div>
            <div class="character-card" id="female-officer">
                <div class="character-img">
                    <div class="character-placeholder">‚ôÄÔ∏è</div>
                </div>
                <h3>Lieutenant Tan Mei Ling</h3>
                <p>Naval Officer</p>
            </div>
        </div>
    </div>

    <div id="story-section" class="game-section">
        <h2>Your Naval Journey</h2>
        <div class="dialogue-container">
            <div class="officer-img">
                <div class="character-placeholder" id="officer-placeholder">üë®‚Äç‚úàÔ∏è</div>
            </div>
            <div id="officer-name" class="officer-name">Lieutenant Lim Wei Ming</div>
            <div id="dialogue-text" class="dialogue-text">
                So you must be the new recruit! Welcome aboard. It's good to have fresh faces joining our ranks.
            </div>
            <div id="dialogue-options" class="dialogue-options">
                <button class="btn dialogue-btn" data-next="1">Why did you join the Navy?</button>
            </div>
        </div>
    </div>

    <div id="game-section" class="game-section">
        <h2>Naval Combat: Pirate Encounter</h2>
        <div class="game-stats">
            <div class="stat">Score: <span id="game-score">0</span></div>
            <div class="stat">Health: <span id="game-health">100</span>%</div>
        </div>
        <div id="game-message"></div>
        <canvas id="game-canvas" width="700" height="500"></canvas>
        <div class="game-controls">
            <button id="restart-game" class="btn">Restart Mission</button>
            <button id="return-story" class="btn">Return to Story</button>
        </div>
    </div>
</div>

<script>
    // Game State
    const gameState = {
        currentSection: 'welcome-screen',
        quizAnswers: {1: 0, 2: 0, 3: 0, 4: 0, 5: 0},
        quizResult: '',
        selectedCharacter: '',
        dialogueStage: 0,
        characterName: '',
        characterGender: '',
        game: {
            shipX: 350,
            shipY: 400,
            shipWidth: 80,
            shipHeight: 50,
            speed: 5,
            bullets: [],
            pirates: [],
            mines: [],
            score: 0,
            health: 100,
            gameOver: false,
            isOfficerHit: false,
            leftPressed: false,
            rightPressed: false,
            lastPirateTime: 0,
            lastMineTime: 0
        }
    };

    // DOM Elements
    const sections = {
        welcomeScreen: document.getElementById('welcome-screen'),
        quizSection: document.getElementById('quiz-section'),
        quizResults: document.getElementById('quiz-results'),
        characterSelection: document.getElementById('character-selection'),
        storySection: document.getElementById('story-section'),
        gameSection: document.getElementById('game-section')
    };

    // Dialog content
    const dialogues = [
        {
            text: "So you must be the new recruit! Welcome aboard. It's good to have fresh faces joining our ranks.",
            options: [{ text: "Why did you join the Navy?", next: 1 }]
        },
        {
            text: "That's a great question! I went to the Navy Museum during my polytechnic days and was fascinated by the experiences shared there. I knew then that I wanted to be a Navy officer.",
            options: [{ text: "What motivated that decision?", next: 2 }]
        },
        {
            text: "I wanted to serve my country and see the world at the same time. After finishing poly, I applied for a scholarship and was accepted into the Navy. The training was challenging but incredibly rewarding.",
            options: [{ text: "What kind of training did you go through?", next: 3 }]
        },
        {
            text: "Oh, we go through extensive training - everything from firefighting and shipwreck patching to weapons systems and strategic planning. Teamwork is crucial in every aspect. We're trained to react quickly to any situation that could arise at sea.",
            options: [{ text: "Was it difficult for you?", next: 4 }]
        },
        {
            text: "It definitely had its challenges. I used to be claustrophobic, which made certain drills very difficult for me. But my bunkmates were incredibly supportive.
            

// Game State
const gameState = {
    currentSection: 'welcome-screen',
    quizAnswers: {1: 0, 2: 0, 3: 0, 4: 0, 5: 0},
    quizResult: '',
    selectedCharacter: '',
    dialogueStage: 0,
    characterName: '',
    characterGender: '',
    game: {
        shipX: 350,
        shipY: 400,
        shipWidth: 80,
        shipHeight: 50,
        speed: 5,
        bullets: [],
        pirates: [],
        mines: [],
        score: 0,
        health: 100,
        gameOver: false,
        isOfficerHit: false,
        leftPressed: false,
        rightPressed: false,
        lastPirateTime: 0,
        lastMineTime: 0
    }
};

// DOM Elements
const sections = {
    welcomeScreen: document.getElementById('welcome-screen'),
    quizSection: document.getElementById('quiz-section'),
    quizResults: document.getElementById('quiz-results'),
    characterSelection: document.getElementById('character-selection'),
    storySection: document.getElementById('story-section'),
    gameSection: document.getElementById('game-section')
};

// Dialog content
const dialogues = [
    {
        text: "So you must be the new recruit! Welcome aboard. It's good to have fresh faces joining our ranks.",
        options: [{ text: "Why did you join the Navy?", next: 1 }]
    },
    {
        text: "That's a great question! I went to the Navy Museum during my polytechnic days and was fascinated by the experiences shared there. I knew then that I wanted to be a Navy officer.",
        options: [{ text: "What motivated that decision?", next: 2 }]
    },
    {
        text: "I wanted to serve my country and see the world at the same time. After finishing poly, I applied for a scholarship and was accepted into the Navy. The training was challenging but incredibly rewarding.",
        options: [{ text: "What kind of training did you go through?", next: 3 }]
    },
    {
        text: "Oh, we go through extensive training - everything from firefighting and shipwreck patching to weapons systems and strategic planning. Teamwork is crucial in every aspect. We're trained to react quickly to any situation that could arise at sea.",
        options: [{ text: "Was it difficult for you?", next: 4 }]
    },
    {
        text: "It definitely had its challenges. I used to be claustrophobic, which made certain drills very difficult for me. But my bunkmates were incredibly supportive.",
        options: [{ text: "What's a typical day like for you now?", next: 5 }]
    },
    {
        text: "Every day is different! Morning begins with physical training, followed by briefings. Then, depending on my rotation, I might be monitoring radar systems, coordinating drills, or planning missions. Wait - I'm getting an alert. Pirates spotted off the coast! We need to intercept them.",
        options: [{ text: "Let's go!", next: 'game' }]
    }
];

// Career paths based on quiz results
const careerPaths = {
    'path1': {
        title: 'Navy SEALs / Naval Diving Unit',
        description: 'You have what it takes to join the elite special forces of the Navy! With your preference for physical challenges and high-intensity operations, the Naval Diving Unit or special operations would be your ideal path.',
        emoji: 'üèä‚Äç‚ôÇÔ∏è'
    },
    'path2': {
        title: 'Tactical Systems Specialist',
        description: 'Your technical mindset and interest in naval systems make you perfect for operating advanced weapons, radar, and sonar equipment. You\'ll be the eyes and ears of the ship.',
        emoji: 'üéØ'
    },
    'path3': {
        title: 'Naval Command Officer',
        description: 'With your leadership qualities and strategic thinking, you\'re destined for command. Your career path leads to becoming a respected officer managing naval operations.',
        emoji: '‚öì'
    },
    'path4': {
        title: 'Naval Engineer',
        description: 'Your problem-solving skills and technical interest make you perfect for designing, maintaining, and improving the Navy\'s vessels and equipment. You\'ll keep everything running smoothly.',
        emoji: 'üîß'
    }
};

// Show a specific section and hide others
function showSection(sectionId) {
    Object.values(sections).forEach(section => {
        section.style.display = 'none';
    });
    
    sections[sectionId].style.display = 'block';
    gameState.currentSection = sectionId;
}

// Handle quiz navigation and scoring
function handleQuiz() {
    const quizQuestions = document.querySelectorAll('.quiz-question');
    let currentQuestion = 0;
    
    // Show first question
    quizQuestions[currentQuestion].style.display = 'block';
    
    // Add event listeners to all option buttons
    document.querySelectorAll('.option-btn').forEach(button => {
        button.addEventListener('click', function() {
            // Save answer
            const questionNumber = Math.floor(Array.from(quizQuestions).indexOf(this.closest('.quiz-question')) + 1);
            const answerValue = parseInt(this.getAttribute('data-value'));
            gameState.quizAnswers[questionNumber] = answerValue;
            
            // Hide current question
            quizQuestions[currentQuestion].style.display = 'none';
            
            // Move to next question or show results
            currentQuestion++;
            if (currentQuestion < quizQuestions.length) {
                quizQuestions[currentQuestion].style.display = 'block';
            } else {
                calculateQuizResults();
                showSection('quizResults');
            }
        });
    });
}

// Calculate quiz results
function calculateQuizResults() {
    // Count occurrences of each answer type
    const answerCounts = [0, 0, 0, 0, 0];
    
    for (const question in gameState.quizAnswers) {
        const answer = gameState.quizAnswers[question];
        answerCounts[answer]++;
    }
    
    // Find the most common answer (ignore 0 index)
    let maxCount = 0;
    let resultPath = 1;
    
    for (let i = 1; i < answerCounts.length; i++) {
        if (answerCounts[i] > maxCount) {
            maxCount = answerCounts[i];
            resultPath = i;
        }
    }
    
    gameState.quizResult = 'path' + resultPath;
    
    // Display result
    const resultDisplay = document.getElementById('result-display');
    const result = careerPaths[gameState.quizResult];
    
    resultDisplay.innerHTML = `
        <div class="emoji">${result.emoji}</div>
        <h3>${result.title}</h3>
        <p>${result.description}</p>
    `;
}

// Handle character selection
function handleCharacterSelection() {
    document.getElementById('male-officer').addEventListener('click', function() {
        gameState.selectedCharacter = 'male';
        gameState.characterName = 'Lieutenant Lim Wei Ming';
        gameState.characterGender = 'male';
        document.getElementById('officer-name').textContent = gameState.characterName;
        document.getElementById('officer-placeholder').textContent = 'üë®‚Äç‚úàÔ∏è';
        showSection('storySection');
        updateDialogue();
    });
    
    document.getElementById('female-officer').addEventListener('click', function() {
        gameState.selectedCharacter = 'female';
        gameState.characterName = 'Lieutenant Tan Mei Ling';
        gameState.characterGender = 'female';
        document.getElementById('officer-name').textContent = gameState.characterName;
        document.getElementById('officer-placeholder').textContent = 'üë©‚Äç‚úàÔ∏è';
        showSection('storySection');
        updateDialogue();
    });
}

// Update dialogue in story section
function updateDialogue() {
    const dialogueText = document.getElementById('dialogue-text');
    const dialogueOptions = document.getElementById('dialogue-options');
    const currentDialogue = dialogues[gameState.dialogueStage];
    
    dialogueText.textContent = currentDialogue.text;
    
    // Clear previous options
    dialogueOptions.innerHTML = '';
    
    // Add new options
    currentDialogue.options.forEach(option => {
        const button = document.createElement('button');
        button.className = 'btn dialogue-btn';
        button.textContent = option.text;
        
        button.addEventListener('click', function() {
            if (option.next === 'game') {
                showSection('gameSection');
                initGame();
            } else {
                gameState.dialogueStage = option.next;
                updateDialogue();
            }
        });
        
        dialogueOptions.appendChild(button);
    });
}

// Initialize the game canvas
function initGame() {
    const canvas = document.getElementById('game-canvas');
    const ctx = canvas.getContext('2d');
    const gameMessage = document.getElementById('game-message');
    const gameScore = document.getElementById('game-score');
    const gameHealth = document.getElementById('game-health');
    
    // Reset game state
    const game = gameState.game;
    game.shipX = canvas.width / 2 - game.shipWidth / 2;
    game.shipY = canvas.height - game.shipHeight - 20;
    game.bullets = [];
    game.pirates = [];
    game.mines = [];
    game.score = 0;
    game.health = 100;
    game.gameOver = false;
    game.isOfficerHit = false;
    game.lastPirateTime = 0;
    game.lastMineTime = 0;
    
    // Update score and health display
    gameScore.textContent = game.score;
    gameHealth.textContent = game.health;
    gameMessage.textContent = '';
    
    // Ship controls
    document.addEventListener('keydown', keyDownHandler);
    document.addEventListener('keyup', keyUpHandler);
    canvas.addEventListener('click', fireHandler);
    
    // Game loop
    const gameLoop = setInterval(() => {
        if (game.gameOver) {
            clearInterval(gameLoop);
            gameMessage.textContent = game.score >= 50 ? 
                'Mission Successful! Pirates defeated!' : 
                'Mission Failed! Ship critically damaged!';
            return;
        }
        
        updateGame();
        drawGame(ctx, canvas);
        
        // Check if game is won
        if (game.score >= 50) {
            game.gameOver = true;
        }
        
        // Check if game is lost
        if (game.health <= 0) {
            game.gameOver = true;
            game.health = 0;
        }
        
        // Update display
        gameScore.textContent = game.score;
        gameHealth.textContent = game.health;
    }, 1000 / 60); // 60 FPS
    
    // Restart button
    document.getElementById('restart-game').addEventListener('click', function() {
        clearInterval(gameLoop);
        initGame();
    });
    
    // Return to story button
    document.getElementById('return-story').addEventListener('click', function() {
        clearInterval(gameLoop);
        document.removeEventListener('keydown', keyDownHandler);
        document.removeEventListener('keyup', keyUpHandler);
        canvas.removeEventListener('click', fireHandler);
        showSection('storySection');
    });
    
    function keyDownHandler(e) {
        if (e.key === 'ArrowRight' || e.key === 'Right') {
            game.rightPressed = true;
        } else if (e.key === 'ArrowLeft' || e.key === 'Left') {
            game.leftPressed = true;
        } else if (e.key === ' ' || e.key === 'Spacebar') {
            fireBullet();
        }
    }
    
    function keyUpHandler(e) {
        if (e.key === 'ArrowRight' || e.key === 'Right') {
            game.rightPressed = false;
        } else if (e.key === 'ArrowLeft' || e.key === 'Left') {
            game.leftPressed = false;
        }
    }
    
    function fireHandler(e) {
        fireBullet();
    }
    
    function fireBullet() {
        if (game.gameOver) return;
        
        game.bullets.push({
            x: game.shipX + game.shipWidth / 2 - 2,
            y: game.shipY,
            width: 4,
            height: 10,
            speed: 7
        });
    }
}

// Update game state
function updateGame() {
    const game = gameState.game;
    
    // Move ship
    if (game.rightPressed && game.shipX < 700 - game.shipWidth) {
        game.shipX += game.speed;
    } else if (game.leftPressed && game.shipX > 0) {
        game.shipX -= game.speed;
    }
    
    // Move bullets
    for (let i = 0; i < game.bullets.length; i++) {
        game.bullets[i].y -= game.bullets[i].speed;
        
        // Remove bullets that are off screen
        if (game.bullets[i].y < 0) {
            game.bullets.splice(i, 1);
            i--;
        }
    }
    
    // Spawn pirates
    const currentTime = Date.now();
    if (currentTime - game.lastPirateTime > 2000) { // Spawn every 2 seconds
        game.pirates.push({
            x: Math.random() * (700 - 40),
            y: -40,
            width: 40,
            height: 30,
            speed: 1 + Math.random() * 2
        });
        game.lastPirateTime = currentTime;
    }
    
    // Spawn mines
    if (currentTime - game.lastMineTime > 5000) { // Spawn every 5 seconds
        game.mines.push({
            x: Math.random() * (700 - 30),
            y: -30,
            width: 30,
            height: 30,
            speed: 1.5 + Math.random()
        });
        game.lastMineTime = currentTime;
    }
    
    // Move pirates
    for (let i = 0; i < game.pirates.length; i++) {
        game.pirates[i].y += game.pirates[i].speed;
        
        // Remove pirates that are off screen
        if (game.pirates[i].y > 500) {
            game.pirates.splice(i, 1);
            i--;
            
            // Penalty for letting pirates pass
            game.health -= 5;
        }
    }
    
    // Move mines
    for (let i = 0; i < game.mines.length; i++) {
        game.mines[i].y += game.mines[i].speed;
        
        // Remove mines that are off screen
        if (game.mines[i].y > 500) {
            game.mines.splice(i, 1);
            i--;
        }
    }
    
    // Check for bullet-pirate collisions
    for (let i = 0; i < game.bullets.length; i++) {
        for (let j = 0; j < game.pirates.length; j++) {
            if (checkCollision(game.bullets[i], game.pirates[j])) {
                game.score += 5;
                game.bullets.splice(i, 1);
                game.pirates.splice(j, 1);
                i--;
                break;
            }
        }
    }
    
    // Check for ship-pirate collisions
    for (let i = 0; i < game.pirates.length; i++) {
